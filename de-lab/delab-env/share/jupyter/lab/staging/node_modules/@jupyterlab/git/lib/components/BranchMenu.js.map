{"version":3,"file":"BranchMenu.js","sourceRoot":"./@jupyterlab/git/src/","sources":["components/BranchMenu.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Dialog, showDialog, showErrorMessage } from '@jupyterlab/apputils';\nimport { TranslationBundle } from '@jupyterlab/translation';\nimport { CommandRegistry } from '@lumino/commands';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport * as React from 'react';\nimport { FixedSizeList, ListChildComponentProps } from 'react-window';\nimport { classes } from 'typestyle';\nimport { Logger } from '../logger';\nimport { hiddenButtonStyle } from '../style/ActionButtonStyle';\nimport {\n  activeListItemClass,\n  nameClass,\n  filterClass,\n  filterClearClass,\n  filterInputClass,\n  filterWrapperClass,\n  listItemClass,\n  listItemIconClass,\n  newBranchButtonClass,\n  wrapperClass\n} from '../style/BranchMenu';\nimport { branchIcon, mergeIcon, trashIcon } from '../style/icons';\nimport { CommandIDs, Git, IGitExtension, Level } from '../tokens';\nimport { ActionButton } from './ActionButton';\nimport { NewBranchDialog } from './NewBranchDialog';\n\nconst ITEM_HEIGHT = 24.8; // HTML element height for a single branch\nconst MIN_HEIGHT = 150; // Minimal HTML element height for the branches list\nconst MAX_HEIGHT = 400; // Maximal HTML element height for the branches list\n\n/**\n * Callback invoked upon encountering an error when switching branches.\n *\n * @private\n * @param error - error\n * @param logger - the logger\n */\nfunction onBranchError(\n  error: any,\n  logger: Logger,\n  trans: TranslationBundle\n): void {\n  if (error.message.includes('following files would be overwritten')) {\n    // Empty log message to hide the executing alert\n    logger.log({\n      message: '',\n      level: Level.INFO\n    });\n    showDialog({\n      title: trans.__('Unable to switch branch'),\n      body: (\n        <React.Fragment>\n          <p>\n            {trans.__(\n              'Your changes to the following files would be overwritten by switching:'\n            )}\n          </p>\n          <List>\n            {error.message.split('\\n').slice(1, -3).map(renderFileName)}\n          </List>\n          <span>\n            {trans.__(\n              'Please commit, stash, or discard your changes before you switch branches.'\n            )}\n          </span>\n        </React.Fragment>\n      ),\n      buttons: [Dialog.okButton({ label: trans.__('Dismiss') })]\n    });\n  } else {\n    logger.log({\n      level: Level.ERROR,\n      message: trans.__('Failed to switch branch.'),\n      error\n    });\n  }\n}\n\n/**\n * Renders a file name.\n *\n * @private\n * @param filename - file name\n * @returns React element\n */\nfunction renderFileName(filename: string): React.ReactElement {\n  return <ListItem key={filename}>{filename}</ListItem>;\n}\n\n/**\n * Interface describing component properties.\n */\nexport interface IBranchMenuProps {\n  /**\n   * Current branch name.\n   */\n  currentBranch: string;\n\n  /**\n   * Current list of branches.\n   */\n  branches: Git.IBranch[];\n\n  /**\n   * Boolean indicating whether branching is disabled.\n   */\n  branching: boolean;\n\n  /**\n   * Jupyter App commands registry\n   */\n  commands: CommandRegistry;\n\n  /**\n   * Extension logger\n   */\n  logger: Logger;\n\n  /**\n   * Git extension data model.\n   */\n  model: IGitExtension;\n\n  /**\n   * The application language translator.\n   */\n  trans: TranslationBundle;\n}\n\n/**\n * Interface describing component state.\n */\nexport interface IBranchMenuState {\n  /**\n   * Boolean indicating whether to show a dialog to create a new branch.\n   */\n  branchDialog: boolean;\n\n  /**\n   * Menu filter.\n   */\n  filter: string;\n}\n\n/**\n * React component for rendering a branch menu.\n */\nexport class BranchMenu extends React.Component<\n  IBranchMenuProps,\n  IBranchMenuState\n> {\n  CHANGES_ERR_MSG = this.props.trans.__(\n    'The current branch contains files with uncommitted changes. Please commit or discard these changes before switching to or creating another branch.'\n  );\n  /**\n   * Returns a React component for rendering a branch menu.\n   *\n   * @param props - component properties\n   * @returns React component\n   */\n  constructor(props: IBranchMenuProps) {\n    super(props);\n\n    this.state = {\n      filter: '',\n      branchDialog: false\n    };\n  }\n\n  /**\n   * Renders the component.\n   *\n   * @returns React element\n   */\n  render(): React.ReactElement {\n    return (\n      <div className={wrapperClass}>\n        {this._renderFilter()}\n        {this._renderBranchList()}\n        {this._renderNewBranchDialog()}\n      </div>\n    );\n  }\n\n  /**\n   * Renders a branch input filter.\n   *\n   * @returns React element\n   */\n  private _renderFilter(): React.ReactElement {\n    return (\n      <div className={filterWrapperClass}>\n        <div className={filterClass}>\n          <input\n            className={filterInputClass}\n            type=\"text\"\n            onChange={this._onFilterChange}\n            value={this.state.filter}\n            placeholder={this.props.trans.__('Filter')}\n            title={this.props.trans.__('Filter branch menu')}\n          />\n          {this.state.filter ? (\n            <button className={filterClearClass}>\n              <ClearIcon\n                titleAccess={this.props.trans.__('Clear the current filter')}\n                fontSize=\"small\"\n                onClick={this._resetFilter}\n              />\n            </button>\n          ) : null}\n        </div>\n        <input\n          className={newBranchButtonClass}\n          type=\"button\"\n          title={this.props.trans.__('Create a new branch')}\n          value={this.props.trans.__('New Branch')}\n          onClick={this._onNewBranchClick}\n        />\n      </div>\n    );\n  }\n\n  /**\n   * Renders a\n   *\n   * @returns React element\n   */\n  private _renderBranchList(): React.ReactElement {\n    // Perform a \"simple\" filter... (TODO: consider implementing fuzzy filtering)\n    const filter = this.state.filter;\n    const branches = this.props.branches.filter(\n      branch => !filter || branch.name.includes(filter)\n    );\n    return (\n      <FixedSizeList\n        height={Math.min(\n          Math.max(MIN_HEIGHT, branches.length * ITEM_HEIGHT),\n          MAX_HEIGHT\n        )}\n        itemCount={branches.length}\n        itemData={branches}\n        itemKey={(index, data) => data[index].name}\n        itemSize={ITEM_HEIGHT}\n        style={{ overflowX: 'hidden', paddingTop: 0, paddingBottom: 0 }}\n        width={'auto'}\n      >\n        {this._renderItem}\n      </FixedSizeList>\n    );\n  }\n\n  /**\n   * Renders a menu item.\n   *\n   * @param props Row properties\n   * @returns React element\n   */\n  private _renderItem = (props: ListChildComponentProps): JSX.Element => {\n    const { data, index, style } = props;\n    const branch = data[index] as Git.IBranch;\n    const isActive = branch.name === this.props.currentBranch;\n    return (\n      <ListItem\n        button\n        title={\n          !isActive\n            ? this.props.trans.__('Switch to branch: %1', branch.name)\n            : ''\n        }\n        className={classes(\n          listItemClass,\n          isActive ? activeListItemClass : null\n        )}\n        onClick={this._onBranchClickFactory(branch.name)}\n        style={style}\n      >\n        <branchIcon.react className={listItemIconClass} tag=\"span\" />\n        <span className={nameClass}>{branch.name}</span>\n        {!branch.is_remote_branch && !isActive && (\n          <>\n            <ActionButton\n              className={hiddenButtonStyle}\n              icon={trashIcon}\n              title={this.props.trans.__('Delete this branch locally')}\n              onClick={async (event: React.MouseEvent) => {\n                event.stopPropagation();\n                await this._onDeleteBranch(branch.name);\n              }}\n            />\n            <ActionButton\n              className={hiddenButtonStyle}\n              icon={mergeIcon}\n              title={this.props.trans.__(\n                'Merge this branch into the current one'\n              )}\n              onClick={(event: React.MouseEvent) => {\n                event.stopPropagation();\n                this._onMergeBranch(branch.name);\n              }}\n            />\n          </>\n        )}\n      </ListItem>\n    );\n  };\n\n  /**\n   * Renders a dialog for creating a new branch.\n   *\n   * @returns React element\n   */\n  private _renderNewBranchDialog(): React.ReactElement {\n    return (\n      <NewBranchDialog\n        currentBranch={this.props.currentBranch}\n        branches={this.props.branches}\n        logger={this.props.logger}\n        open={this.state.branchDialog}\n        model={this.props.model}\n        onClose={this._onNewBranchDialogClose}\n        trans={this.props.trans}\n      />\n    );\n  }\n\n  /**\n   * Callback invoked upon a change to the menu filter.\n   *\n   * @param event - event object\n   */\n  private _onFilterChange = (event: any): void => {\n    this.setState({\n      filter: event.target.value\n    });\n  };\n\n  /**\n   * Callback invoked to reset the menu filter.\n   */\n  private _resetFilter = (): void => {\n    this.setState({\n      filter: ''\n    });\n  };\n\n  /**\n   * Callback on delete branch name button\n   *\n   * @param branchName Branch name\n   */\n  private _onDeleteBranch = async (branchName: string): Promise<void> => {\n    const acknowledgement = await showDialog<void>({\n      title: this.props.trans.__('Delete branch'),\n      body: (\n        <p>\n          {this.props.trans.__(\n            'Are you sure you want to permanently delete the branch '\n          )}\n          <b>{branchName}</b>?\n          <br />\n          {this.props.trans.__('This action cannot be undone.')}\n        </p>\n      ),\n      buttons: [\n        Dialog.cancelButton({ label: this.props.trans.__('Cancel') }),\n        Dialog.warnButton({ label: this.props.trans.__('Delete') })\n      ]\n    });\n    if (acknowledgement.button.accept) {\n      try {\n        await this.props.model.deleteBranch(branchName);\n        await this.props.model.refreshBranch();\n      } catch (error) {\n        console.error(`Failed to delete branch ${branchName}`, error);\n      }\n    }\n  };\n\n  /**\n   * Callback on merge branch name button\n   *\n   * @param branchName Branch name\n   */\n  private _onMergeBranch = async (branch: string): Promise<void> => {\n    await this.props.commands.execute(CommandIDs.gitMerge, { branch });\n  };\n\n  /**\n   * Callback invoked upon clicking a button to create a new branch.\n   *\n   * @param event - event object\n   */\n  private _onNewBranchClick = (): void => {\n    if (!this.props.branching) {\n      showErrorMessage(\n        this.props.trans.__('Creating a new branch is disabled'),\n        this.CHANGES_ERR_MSG\n      );\n      return;\n    }\n    this.setState({\n      branchDialog: true\n    });\n  };\n\n  /**\n   * Callback invoked upon closing a dialog to create a new branch.\n   */\n  private _onNewBranchDialogClose = (): void => {\n    this.setState({\n      branchDialog: false\n    });\n  };\n\n  /**\n   * Returns a callback which is invoked upon clicking a branch name.\n   *\n   * @param branch - branch name\n   * @returns callback\n   */\n  private _onBranchClickFactory(branch: string) {\n    const self = this;\n    return onClick;\n\n    /**\n     * Callback invoked upon clicking a branch name.\n     *\n     * @private\n     * @param event - event object\n     * @returns promise which resolves upon attempting to switch branches\n     */\n    async function onClick(): Promise<void> {\n      if (!self.props.branching) {\n        showErrorMessage(\n          self.props.trans.__('Switching branches is disabled'),\n          self.CHANGES_ERR_MSG\n        );\n        return;\n      }\n      const opts = {\n        branchname: branch\n      };\n\n      self.props.logger.log({\n        level: Level.RUNNING,\n        message: self.props.trans.__('Switching branch…')\n      });\n\n      try {\n        await self.props.model.checkout(opts);\n      } catch (err) {\n        return onBranchError(err, self.props.logger, self.props.trans);\n      }\n\n      self.props.logger.log({\n        level: Level.SUCCESS,\n        message: self.props.trans.__('Switched branch.')\n      });\n    }\n  }\n}\n"]}